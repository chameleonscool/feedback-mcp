<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 700">
  <defs>
    <linearGradient id="titleGrad3" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#ef4444"/>
    </linearGradient>
    <filter id="shadow3" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>
  
  <!-- Title -->
  <rect x="0" y="0" width="950" height="50" fill="url(#titleGrad3)"/>
  <text x="475" y="32" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="20" font-weight="bold">
    æ•°æ®åº“ ER å›¾
  </text>
  
  <!-- admin_config Table -->
  <rect x="30" y="80" width="200" height="140" rx="8" fill="white" stroke="#f59e0b" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="30" y="80" width="200" height="35" rx="8" fill="#fef3c7"/>
  <text x="130" y="103" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#92400e">admin_config</text>
  <line x1="30" y1="115" x2="230" y2="115" stroke="#fde68a" stroke-width="1"/>
  
  <text x="45" y="135" font-family="monospace" font-size="10" fill="#1f2937">ğŸ”‘ key</text>
  <text x="175" y="135" font-family="monospace" font-size="9" fill="#6b7280">TEXT PK</text>
  
  <text x="45" y="155" font-family="monospace" font-size="10" fill="#1f2937">   value</text>
  <text x="175" y="155" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <rect x="40" y="170" width="180" height="40" rx="4" fill="#fef9c3"/>
  <text x="130" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#854d0e">admin_username, admin_password_hash</text>
  <text x="130" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#854d0e">feishu_app_id, feishu_app_secret...</text>
  
  <!-- admin_sessions Table -->
  <rect x="30" y="240" width="200" height="130" rx="8" fill="white" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="30" y="240" width="200" height="35" rx="8" fill="#f3e8ff"/>
  <text x="130" y="263" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#6b21a8">admin_sessions</text>
  <line x1="30" y1="275" x2="230" y2="275" stroke="#e9d5ff" stroke-width="1"/>
  
  <text x="45" y="295" font-family="monospace" font-size="10" fill="#1f2937">ğŸ”‘ token</text>
  <text x="175" y="295" font-family="monospace" font-size="9" fill="#6b7280">TEXT PK</text>
  
  <text x="45" y="315" font-family="monospace" font-size="10" fill="#1f2937">   created_at</text>
  <text x="175" y="315" font-family="monospace" font-size="9" fill="#6b7280">REAL</text>
  
  <text x="45" y="335" font-family="monospace" font-size="10" fill="#1f2937">   expires_at</text>
  <text x="175" y="335" font-family="monospace" font-size="9" fill="#6b7280">REAL</text>
  
  <rect x="40" y="350" width="180" height="15" rx="4" fill="#faf5ff"/>
  <text x="130" y="361" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7c3aed">ç®¡ç†å‘˜ä¼šè¯æŒä¹…åŒ–</text>
  
  <!-- users Table -->
  <rect x="280" y="80" width="250" height="350" rx="8" fill="white" stroke="#3b82f6" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="280" y="80" width="250" height="35" rx="8" fill="#dbeafe"/>
  <text x="405" y="103" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e40af">users</text>
  <line x1="280" y1="115" x2="530" y2="115" stroke="#bfdbfe" stroke-width="1"/>
  
  <text x="295" y="135" font-family="monospace" font-size="10" fill="#1f2937">ğŸ”‘ open_id</text>
  <text x="470" y="135" font-family="monospace" font-size="9" fill="#6b7280">TEXT PK</text>
  
  <text x="295" y="155" font-family="monospace" font-size="10" fill="#1f2937">   union_id</text>
  <text x="470" y="155" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="295" y="175" font-family="monospace" font-size="10" fill="#1f2937">   user_id</text>
  <text x="470" y="175" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="295" y="195" font-family="monospace" font-size="10" fill="#1f2937">   tenant_key</text>
  <text x="470" y="195" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="295" y="215" font-family="monospace" font-size="10" fill="#1f2937">   name</text>
  <text x="470" y="215" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="295" y="235" font-family="monospace" font-size="10" fill="#1f2937">   en_name</text>
  <text x="470" y="235" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="295" y="255" font-family="monospace" font-size="10" fill="#1f2937">   avatar_url</text>
  <text x="470" y="255" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="295" y="275" font-family="monospace" font-size="10" fill="#1f2937">   email</text>
  <text x="470" y="275" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <line x1="290" y1="285" x2="520" y2="285" stroke="#e5e7eb" stroke-width="1" stroke-dasharray="3,3"/>
  
  <text x="295" y="305" font-family="monospace" font-size="10" fill="#059669">   access_token</text>
  <text x="470" y="305" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="295" y="325" font-family="monospace" font-size="10" fill="#059669">   refresh_token</text>
  <text x="470" y="325" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="295" y="345" font-family="monospace" font-size="10" fill="#059669">   token_expires_at</text>
  <text x="470" y="345" font-family="monospace" font-size="9" fill="#6b7280">INTEGER</text>
  
  <line x1="290" y1="355" x2="520" y2="355" stroke="#e5e7eb" stroke-width="1" stroke-dasharray="3,3"/>
  
  <text x="295" y="375" font-family="monospace" font-size="10" fill="#dc2626">   api_key</text>
  <text x="470" y="375" font-family="monospace" font-size="9" fill="#6b7280">TEXT UK</text>
  
  <text x="295" y="395" font-family="monospace" font-size="10" fill="#1f2937">   is_active</text>
  <text x="470" y="395" font-family="monospace" font-size="9" fill="#6b7280">INTEGER</text>
  
  <text x="295" y="415" font-family="monospace" font-size="10" fill="#1f2937">   created_at</text>
  <text x="470" y="415" font-family="monospace" font-size="9" fill="#6b7280">INTEGER</text>
  
  <!-- user_settings Table -->
  <rect x="580" y="80" width="200" height="130" rx="8" fill="white" stroke="#06b6d4" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="580" y="80" width="200" height="35" rx="8" fill="#cffafe"/>
  <text x="680" y="103" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0e7490">user_settings</text>
  <line x1="580" y1="115" x2="780" y2="115" stroke="#a5f3fc" stroke-width="1"/>
  
  <text x="595" y="135" font-family="monospace" font-size="10" fill="#1f2937">ğŸ”‘ user_id</text>
  <text x="725" y="135" font-family="monospace" font-size="9" fill="#6b7280">TEXT PK</text>
  
  <text x="595" y="155" font-family="monospace" font-size="10" fill="#1f2937">ğŸ”‘ key</text>
  <text x="725" y="155" font-family="monospace" font-size="9" fill="#6b7280">TEXT PK</text>
  
  <text x="595" y="175" font-family="monospace" font-size="10" fill="#1f2937">   value</text>
  <text x="725" y="175" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <rect x="590" y="190" width="180" height="15" rx="4" fill="#ecfeff"/>
  <text x="680" y="201" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#0e7490">feishu_notify_enabled...</text>
  
  <!-- intent_queue Table -->
  <rect x="580" y="240" width="200" height="230" rx="8" fill="white" stroke="#22c55e" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="580" y="240" width="200" height="35" rx="8" fill="#dcfce7"/>
  <text x="680" y="263" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#166534">intent_queue</text>
  <line x1="580" y1="275" x2="780" y2="275" stroke="#bbf7d0" stroke-width="1"/>
  
  <text x="595" y="295" font-family="monospace" font-size="10" fill="#1f2937">ğŸ”‘ id</text>
  <text x="725" y="295" font-family="monospace" font-size="9" fill="#6b7280">TEXT PK</text>
  
  <text x="595" y="315" font-family="monospace" font-size="10" fill="#dc2626">ğŸ”— user_id</text>
  <text x="725" y="315" font-family="monospace" font-size="9" fill="#6b7280">TEXT FK</text>
  
  <text x="595" y="335" font-family="monospace" font-size="10" fill="#1f2937">   question</text>
  <text x="725" y="335" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="595" y="355" font-family="monospace" font-size="10" fill="#1f2937">   answer</text>
  <text x="725" y="355" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="595" y="375" font-family="monospace" font-size="10" fill="#1f2937">   image</text>
  <text x="725" y="375" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="595" y="395" font-family="monospace" font-size="10" fill="#1f2937">   status</text>
  <text x="725" y="395" font-family="monospace" font-size="9" fill="#6b7280">TEXT</text>
  
  <text x="595" y="415" font-family="monospace" font-size="10" fill="#1f2937">   created_at</text>
  <text x="725" y="415" font-family="monospace" font-size="9" fill="#6b7280">TIMESTAMP</text>
  
  <text x="595" y="435" font-family="monospace" font-size="10" fill="#1f2937">   completed_at</text>
  <text x="725" y="435" font-family="monospace" font-size="9" fill="#6b7280">TIMESTAMP</text>
  
  <rect x="590" y="450" width="180" height="15" rx="4" fill="#f0fdf4"/>
  <text x="680" y="461" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#166534">user_id=NULL è¡¨ç¤ºå…¬å…±æ¶ˆæ¯</text>
  
  <!-- Relationships -->
  <!-- users -> user_settings (1:N) -->
  <path d="M530 150 Q555 150 555 130 Q555 110 580 130" stroke="#06b6d4" stroke-width="2" fill="none"/>
  <text x="555" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#06b6d4">1:N</text>
  
  <!-- users -> intent_queue (1:N) -->
  <path d="M530 350 Q555 350 555 330 Q555 310 580 330" stroke="#22c55e" stroke-width="2" fill="none"/>
  <text x="555" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#22c55e">1:N</text>
  
  <!-- Legend -->
  <rect x="30" y="500" width="250" height="180" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
  <text x="155" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#475569">å›¾ä¾‹</text>
  
  <text x="45" y="550" font-family="monospace" font-size="10" fill="#1f2937">ğŸ”‘ ä¸»é”® (Primary Key)</text>
  <text x="45" y="570" font-family="monospace" font-size="10" fill="#1f2937">ğŸ”— å¤–é”® (Foreign Key)</text>
  <text x="45" y="590" font-family="monospace" font-size="10" fill="#059669">ç»¿è‰² = Token å­—æ®µ</text>
  <text x="45" y="610" font-family="monospace" font-size="10" fill="#dc2626">çº¢è‰² = å…³é”®å­—æ®µ</text>
  <text x="45" y="630" font-family="monospace" font-size="10" fill="#6b7280">UK = Unique Key</text>
  <text x="45" y="650" font-family="monospace" font-size="10" fill="#6b7280">FK = Foreign Key</text>
  <text x="45" y="670" font-family="monospace" font-size="10" fill="#6b7280">PK = Primary Key</text>
  
  <!-- Notes -->
  <rect x="310" y="500" width="300" height="180" rx="8" fill="#fefce8" stroke="#eab308" stroke-width="1"/>
  <text x="460" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#854d0e">ğŸ“ è¯´æ˜</text>
  <text x="325" y="550" font-family="Arial, sans-serif" font-size="10" fill="#713f12">â€¢ admin_config: ç®¡ç†å‘˜é…ç½® (ç”¨æˆ·å/å¯†ç /é£ä¹¦å‡­è¯)</text>
  <text x="325" y="570" font-family="Arial, sans-serif" font-size="10" fill="#713f12">â€¢ admin_sessions: ç®¡ç†å‘˜ä¼šè¯ (æŒä¹…åŒ–åˆ°æ•°æ®åº“)</text>
  <text x="325" y="590" font-family="Arial, sans-serif" font-size="10" fill="#713f12">â€¢ users: é£ä¹¦ç”¨æˆ· (open_id ä¸ºä¸»é”®)</text>
  <text x="325" y="610" font-family="Arial, sans-serif" font-size="10" fill="#713f12">â€¢ user_settings: ç”¨æˆ·è®¾ç½® (é£ä¹¦é€šçŸ¥å¼€å…³ç­‰)</text>
  <text x="325" y="630" font-family="Arial, sans-serif" font-size="10" fill="#713f12">â€¢ intent_queue: æ„å›¾é˜Ÿåˆ—</text>
  <text x="325" y="650" font-family="Arial, sans-serif" font-size="10" fill="#713f12">  - user_id=NULL: å…¬å…±æ¶ˆæ¯ (æ— ç™»å½•æ¨¡å¼)</text>
  <text x="325" y="670" font-family="Arial, sans-serif" font-size="10" fill="#713f12">  - user_id=open_id: ç”¨æˆ·ä¸“å±æ¶ˆæ¯</text>
  
  <!-- Isolation Note -->
  <rect x="640" y="500" width="280" height="80" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="780" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534">ğŸ”’ ç”¨æˆ·çº§æ¶ˆæ¯éš”ç¦»</text>
  <text x="655" y="550" font-family="Arial, sans-serif" font-size="10" fill="#166534">â€¢ ç”¨æˆ· A åªèƒ½çœ‹åˆ° user_id=A çš„æ¶ˆæ¯</text>
  <text x="655" y="570" font-family="Arial, sans-serif" font-size="10" fill="#166534">â€¢ æ— ç™»å½•ç”¨æˆ·åªèƒ½çœ‹åˆ° user_id=NULL çš„æ¶ˆæ¯</text>
</svg>
