<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 800">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#8b5cf6"/>
    </linearGradient>
    <linearGradient id="clientGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#dbeafe"/>
      <stop offset="100%" style="stop-color:#bfdbfe"/>
    </linearGradient>
    <linearGradient id="serverGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#dcfce7"/>
      <stop offset="100%" style="stop-color:#bbf7d0"/>
    </linearGradient>
    <linearGradient id="dataGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fef3c7"/>
      <stop offset="100%" style="stop-color:#fde68a"/>
    </linearGradient>
    <linearGradient id="externalGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fce7f3"/>
      <stop offset="100%" style="stop-color:#fbcfe8"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
    <marker id="arrowDown" markerWidth="10" markerHeight="7" refX="3.5" refY="0" orient="auto">
      <polygon points="0 0, 7 0, 3.5 10" fill="#64748b"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <rect x="0" y="0" width="1000" height="50" fill="url(#headerGrad)"/>
  <text x="500" y="32" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="20" font-weight="bold">
    é£ä¹¦å¤šç§Ÿæˆ·ç³»ç»Ÿæ¶æ„å›¾
  </text>
  
  <!-- Client Layer -->
  <rect x="20" y="70" width="960" height="140" rx="10" fill="url(#clientGrad)" filter="url(#shadow)"/>
  <text x="40" y="95" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e40af">å®¢æˆ·ç«¯å±‚ (Client Layer)</text>
  
  <!-- MCP Client -->
  <rect x="60" y="110" width="180" height="80" rx="8" fill="white" stroke="#3b82f6" stroke-width="2"/>
  <text x="150" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#1e40af">ğŸ¤– MCP å®¢æˆ·ç«¯</text>
  <text x="150" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#64748b">Cursor / Claude</text>
  <text x="150" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">stdio / SSE</text>
  
  <!-- Web UI -->
  <rect x="280" y="110" width="180" height="80" rx="8" fill="white" stroke="#3b82f6" stroke-width="2"/>
  <text x="370" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#1e40af">ğŸŒ Web UI</text>
  <text x="370" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#64748b">æµè§ˆå™¨</text>
  <text x="370" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">HTTP / WebSocket</text>
  
  <!-- Feishu App -->
  <rect x="500" y="110" width="180" height="80" rx="8" fill="white" stroke="#3b82f6" stroke-width="2"/>
  <text x="590" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#1e40af">ğŸ“± é£ä¹¦ App</text>
  <text x="590" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#64748b">ç§»åŠ¨ç«¯ / æ¡Œé¢ç«¯</text>
  <text x="590" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">é£ä¹¦æ¶ˆæ¯</text>
  
  <!-- Admin UI -->
  <rect x="720" y="110" width="180" height="80" rx="8" fill="white" stroke="#3b82f6" stroke-width="2"/>
  <text x="810" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#1e40af">âš™ï¸ ç®¡ç†åå°</text>
  <text x="810" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#64748b">Admin Panel</text>
  <text x="810" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">HTTP</text>
  
  <!-- Arrows from Client to Server (using simple lines with triangles) -->
  <line x1="150" y1="190" x2="150" y2="235" stroke="#64748b" stroke-width="2"/>
  <polygon points="145,235 155,235 150,245" fill="#64748b"/>
  
  <line x1="370" y1="190" x2="370" y2="235" stroke="#64748b" stroke-width="2"/>
  <polygon points="365,235 375,235 370,245" fill="#64748b"/>
  
  <line x1="590" y1="190" x2="590" y2="235" stroke="#64748b" stroke-width="2"/>
  <polygon points="585,235 595,235 590,245" fill="#64748b"/>
  
  <line x1="810" y1="190" x2="810" y2="235" stroke="#64748b" stroke-width="2"/>
  <polygon points="805,235 815,235 810,245" fill="#64748b"/>
  
  <!-- Server Layer -->
  <rect x="20" y="250" width="960" height="240" rx="10" fill="url(#serverGrad)" filter="url(#shadow)"/>
  <text x="40" y="275" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#166534">æœåŠ¡å±‚ (Server Layer)</text>
  
  <!-- FastAPI Application Box -->
  <rect x="50" y="290" width="900" height="180" rx="8" fill="white" stroke="#22c55e" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="70" y="315" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">FastAPI Application</text>
  
  <!-- API Layer -->
  <rect x="70" y="330" width="180" height="60" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="160" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">MCP æœåŠ¡</text>
  <text x="160" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">core.py</text>
  
  <rect x="270" y="330" width="180" height="60" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="360" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">Web API</text>
  <text x="360" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">web.py</text>
  
  <rect x="470" y="330" width="180" height="60" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="560" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">Auth API</text>
  <text x="560" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">auth.py</text>
  
  <rect x="670" y="330" width="180" height="60" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="760" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">Admin API</text>
  <text x="760" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">admin.py</text>
  
  <!-- Business Logic Layer -->
  <rect x="170" y="405" width="180" height="50" rx="6" fill="#dcfce7" stroke="#16a34a" stroke-width="1.5"/>
  <text x="260" y="430" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534">è®¤è¯æ¨¡å—</text>
  <text x="260" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748b">OAuth / Session</text>
  
  <rect x="370" y="405" width="180" height="50" rx="6" fill="#dcfce7" stroke="#16a34a" stroke-width="1.5"/>
  <text x="460" y="430" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534">é£ä¹¦æ¨¡å—</text>
  <text x="460" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748b">feishu.py</text>
  
  <rect x="570" y="405" width="180" height="50" rx="6" fill="#dcfce7" stroke="#16a34a" stroke-width="1.5"/>
  <text x="660" y="430" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534">Intent æ¨¡å—</text>
  <text x="660" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748b">æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†</text>
  
  <!-- Arrow from Server to Data Layer -->
  <line x1="460" y1="455" x2="460" y2="500" stroke="#64748b" stroke-width="1.5" stroke-dasharray="4,4"/>
  <polygon points="455,500 465,500 460,510" fill="#64748b"/>
  
  <!-- Data Layer -->
  <rect x="20" y="510" width="960" height="120" rx="10" fill="url(#dataGrad)" filter="url(#shadow)"/>
  <text x="40" y="535" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#92400e">æ•°æ®å±‚ (Data Layer)</text>
  
  <!-- SQLite -->
  <rect x="100" y="550" width="800" height="60" rx="8" fill="white" stroke="#f59e0b" stroke-width="2"/>
  <text x="150" y="575" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#92400e">SQLite Database</text>
  
  <rect x="260" y="555" width="130" height="40" rx="4" fill="#fef3c7" stroke="#d97706" stroke-width="1"/>
  <text x="325" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#92400e">system_config</text>
  
  <rect x="400" y="555" width="100" height="40" rx="4" fill="#fef3c7" stroke="#d97706" stroke-width="1"/>
  <text x="450" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#92400e">users</text>
  
  <rect x="510" y="555" width="100" height="40" rx="4" fill="#fef3c7" stroke="#d97706" stroke-width="1"/>
  <text x="560" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#92400e">sessions</text>
  
  <rect x="620" y="555" width="120" height="40" rx="4" fill="#fef3c7" stroke="#d97706" stroke-width="1"/>
  <text x="680" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#92400e">intent_queue</text>
  
  <!-- External Services -->
  <rect x="20" y="650" width="960" height="130" rx="10" fill="url(#externalGrad)" filter="url(#shadow)"/>
  <text x="40" y="675" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#9d174d">å¤–éƒ¨æœåŠ¡ (External Services)</text>
  
  <!-- Feishu Open Platform -->
  <rect x="100" y="695" width="350" height="65" rx="8" fill="white" stroke="#ec4899" stroke-width="2"/>
  <text x="275" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#9d174d">ğŸ” é£ä¹¦å¼€æ”¾å¹³å°</text>
  <text x="275" y="740" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">OAuth è®¤è¯ | ç”¨æˆ·ä¿¡æ¯ API | Token ç®¡ç†</text>
  
  <!-- Feishu IM -->
  <rect x="500" y="695" width="350" height="65" rx="8" fill="white" stroke="#ec4899" stroke-width="2"/>
  <text x="675" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#9d174d">ğŸ’¬ é£ä¹¦ IM</text>
  <text x="675" y="740" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">å‘é€æ¶ˆæ¯ API | WebSocket äº‹ä»¶è®¢é˜…</text>
  
  <!-- Connection from Server to External Services (bidirectional arrows) -->
  <line x1="260" y1="455" x2="260" y2="480" stroke="#ec4899" stroke-width="1.5" stroke-dasharray="4,4"/>
  <line x1="260" y1="480" x2="275" y2="480" stroke="#ec4899" stroke-width="1.5" stroke-dasharray="4,4"/>
  <line x1="275" y1="480" x2="275" y2="695" stroke="#ec4899" stroke-width="1.5" stroke-dasharray="4,4"/>
  
  <line x1="660" y1="455" x2="660" y2="480" stroke="#ec4899" stroke-width="1.5" stroke-dasharray="4,4"/>
  <line x1="660" y1="480" x2="675" y2="480" stroke="#ec4899" stroke-width="1.5" stroke-dasharray="4,4"/>
  <line x1="675" y1="480" x2="675" y2="695" stroke="#ec4899" stroke-width="1.5" stroke-dasharray="4,4"/>
  
  <!-- Bidirectional arrows indicator -->
  <text x="285" y="580" font-family="Arial, sans-serif" font-size="10" fill="#ec4899">â†•</text>
  <text x="685" y="580" font-family="Arial, sans-serif" font-size="10" fill="#ec4899">â†•</text>
</svg>
